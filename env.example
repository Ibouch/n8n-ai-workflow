# ==============================================================================
# ENVIRONMENT CONFIGURATION TEMPLATE
# ==============================================================================
# Usage:
# - Copy to .env and customize values for your environment
# - Secrets are managed via files in secrets/ directory
# - Generate secrets with: ./scripts/generate-secrets.sh
# - Variables used by Docker Compose and validation scripts
# - Production deployments should use compose.prod.yml overlay

# ==============================================================================
# DOMAIN & PROTOCOL CONFIGURATION
# ==============================================================================

# Primary domain for N8N service (FQDN without protocol)
N8N_HOST=n8n.yourdomain.com

# External protocol (https recommended for production)
N8N_PROTOCOL=https

# Webhook base URL (must include protocol and trailing slash)
WEBHOOK_URL=https://n8n.yourdomain.com/

# Editor base URL (must include protocol and trailing slash)
N8N_EDITOR_BASE_URL=https://n8n.yourdomain.com/

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL database name
POSTGRES_DB=n8n_production

# PostgreSQL username (avoid default names for security)
POSTGRES_USER=n8n_app_user

# Database connection pool size
DB_POOL_SIZE=20

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================

# Enable HTTP basic authentication for N8N UI
N8N_BASIC_AUTH_ACTIVE=true

# Force secure cookies (required for HTTPS)
N8N_SECURE_COOKIE=true

# N8N admin username (avoid generic names like 'admin')
N8N_ADMIN_USER=n8n_admin

# N8N logging level (error, warn, info, verbose, debug, silly)
N8N_LOG_LEVEL=info

# ==============================================================================
# SMTP CONFIGURATION (for notifications and alerts)
# ==============================================================================

# SMTP server configuration
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USERNAME=noreply@yourdomain.com
SMTP_FROM=noreply@yourdomain.com
SMTP_SENDER_NAME="N8N Workflow Platform"

# Alert email destination
ALERT_EMAIL_TO=admin@yourdomain.com

# Security settings (use TLS for port 587, SSL for port 465)
SMTP_TLS=true
SMTP_SSL=false

# OAuth settings (optional, for enhanced security)
SMTP_OAUTH_SERVICE_CLIENT=
SMTP_OAUTH_PRIVATE_KEY=

# ==============================================================================
# MONITORING CONFIGURATION (PRODUCTION)
# ==============================================================================

# Grafana root URL for proper reverse proxy configuration
GRAFANA_ROOT_URL=https://n8n.yourdomain.com/monitoring/grafana

# Grafana admin username (password in secrets/grafana_password.txt)
GRAFANA_ADMIN_USER=grafana_admin

# Enable monitoring stack deployment
ENABLE_MONITORING=true

# Monitoring data retention
PROMETHEUS_RETENTION_TIME=45d
PROMETHEUS_RETENTION_SIZE=10GB

# ==============================================================================
# FEATURE TOGGLES
# ==============================================================================

# Prometheus metrics export
N8N_METRICS=true

# Version update notifications
N8N_VERSION_NOTIFICATIONS_ENABLED=false

# Telemetry data collection
N8N_DIAGNOSTICS_ENABLED=false

# Personalization prompts
N8N_PERSONALIZATION_ENABLED=false

# Redis queue backend
ENABLE_REDIS_CACHE=true

# Execution data retention settings
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all

# ==============================================================================
# TIMEZONE & LOCALIZATION
# ==============================================================================

# System timezone
GENERIC_TIMEZONE=UTC

# ==============================================================================
# STORAGE & BACKUP CONFIGURATION
# ==============================================================================

# Data storage path (volumes will be created here)
DATA_PATH=./volumes

# Backup retention in days
BACKUP_RETENTION_DAYS=30

# Backup encryption (uses age encryption)
BACKUP_ENCRYPTION_ENABLED=true

# ==============================================================================
# PERFORMANCE TUNING
# ==============================================================================

# Worker processes and memory limits
WORKER_PROCESSES=auto
WORKER_CONNECTIONS=8192

# N8N execution settings
EXECUTIONS_TIMEOUT=3600
EXECUTIONS_TIMEOUT_MAX=7200
EXECUTIONS_PROCESS=main
EXECUTIONS_MODE=queue

# ==============================================================================
# DEVELOPMENT SETTINGS (disable for production)
# ==============================================================================

# Development mode (set to false for production)
DEVELOPMENT_MODE=false

# Debug logging (set to false for production)
DEBUG_ENABLED=false